
{%extends file="./tpl/layout.html"%} 
{%block name="css"%}
    <link href="../css/form.css" rel="stylesheet" type="text/css" />
    <link href="../css/link.css" rel="stylesheet" type="text/css" />
{%/block%}
    
{%block name="title"%}<title>用户注册界面</title>{%/block%}
    
{%block name="javascript"%}
    <script type="text/javascript" src="../jquery/jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
        //窗体改变大小时触发事件
        window.onresize = setViewSize;
        var marginLeft=0;
        var marginTop=0;
        //设置画布大小，登录页面显示在屏幕最中间
        function setViewSize() {
            //计算屏幕大小
            var w=window.innerWidth
            || document.documentElement.clientWidth
            || document.body.clientWidth;
            var h=window.innerHeight
            || document.documentElement.clientHeight
            || document.body.clientHeight;
            //设置登陆div的位置
            marginLeft = (w-468)/2 + "px";
            marginTop = (h-262)/2 + "px";
            var form = document.getElementById("registerFormMain");
            form.style.marginLeft=marginLeft;
            form.style.marginTop=marginTop;
        }
        
        //默认聚焦在用户名输入框上
        function focusOnUsername() {
            //调整画布大小和登陆框位置
            setViewSize();
            //默认聚焦在输入框上
            if (document.registerForm) {
                var usernameInput = document.registerForm.username;
                if (usernameInput) {
                    usernameInput.focus();
                }
            }
            return;
        }
    
        //检查用户输入
        function checkRegister(){
            if(checkUsername() && checkPassword()){
                return true;
            }		  
            return false;
        }
        //检查登录用户名
        function checkUsername(){
            var username = document.registerForm.username;
            if(username.value.length!=0){
                return true;
            }else{
                alert("请输入用户名");
                return false;
            }
        }
        //检查登录密码
        function checkPassword(){
            var password = document.registerForm.password;
            var passwdcf = document.registerForm.passwdcf;
            if (password.value.length == 0) {
                alert("请输入密码");
                return false;
            }
            if (passwdcf.value.length == 0) {
                alert("请输入确认密码");
                return false;
            }
            if (password.value.length < 6) {
                alert("密码长度至少6位");
                return false;
            }

            if (password.value != passwdcf.value) {
                alert("密码与确认密码不一致");
                return false;
            }
            return true;
        }

        $(document).ready(function() {
            $("#userid").change(function() {
                $(this).css("background-color","#FFFFCC");
                var username = document.getElementById("userid").value;
                $.get("./test.php", {user: username}, function(msg) {
                    console.log("msg = " + msg);
                    alert("msg: " + msg);
                });

            });
        });

    </script>
{%/block%}

{%block name="body"%}
<body onload="javascript:focusOnUsername();" background="../pictures/bg_login.jpg" >
    <form action="./registerAuth.php" name="registerForm" >
    <div id="registerFormMain" style="margin-left: 0px;margin-top: 0px">
        <table style="width:468px;height:262px;background-color: rgba(0, 0, 0, 0.3);text-align: center;color: white">
            <tr>
                <th colspan="2" align="center">用户注册</th>
            </tr>
            <tr>
                <td>用户名&nbsp;<input id="userid" type="text" style="width: 200px;height: 30px;"  name="username"></td>
            </tr>
            <tr>
                <td>密  码&nbsp;<input type="password"  style="width: 200px;height: 30px;"  name="password"></td>
            </tr>
            <tr>
                <td>确认密码&nbsp;<input type="password"  style="width: 200px;height: 30px;"  name="passwdcf"></td>
            </tr>
            <tr>
                <td align="center" >
                    <input formmethod="post" type="submit" style="cursor: pointer;font-style: inherit;" name="submit"  onclick="return checkRegister();" value="注册" > 
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="reset"  style="cursor: pointer;" name=reset  value="重置">
                </td>
                <div>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <a href="./login.php">已有账号登录</a>
                </div>
            </tr>
        </table>
    </div>
    </form>
</body>
{%/block%}
